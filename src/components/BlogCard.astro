---
interface Props {
  title: string;
  summary: string;
  date: Date;
  author: string;
  category: string;
  image?: string;
  slug: string;
}

const { title, summary, date, author, category, image, slug } = Astro.props;

const formattedDate = new Intl.DateTimeFormat("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
}).format(date);

const categoryColors: Record<string, { bg: string; text: string }> = {
  eos: { bg: "var(--color-cat-eos-bg)", text: "var(--color-cat-eos)" },
  strategy: { bg: "var(--color-cat-strategy-bg)", text: "var(--color-cat-strategy)" },
  "team-health": { bg: "var(--color-cat-team-health-bg)", text: "var(--color-cat-team-health)" },
  fractional: { bg: "var(--color-cat-fractional-bg)", text: "var(--color-cat-fractional)" },
};
const colors = categoryColors[category] || { bg: "var(--color-purple-50)", text: "var(--color-primary)" };
---

<a href={`/blog/${slug}`} class="card overflow-hidden group">
  {image && (
    <div class="aspect-video overflow-hidden">
      <img src={image} alt={title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
    </div>
  )}
  <div class="p-6">
    <div class="flex items-center gap-3 mb-3">
      <span
        class="text-xs font-bold uppercase tracking-wider px-2 py-1 rounded"
        style={`background-color: ${colors.bg}; color: ${colors.text};`}
      >{category.replace("-", " ")}</span>
      <span class="text-xs text-neutral-600">{formattedDate}</span>
    </div>
    <h3 class="text-lg mb-2 group-hover:text-primary transition-colors">{title}</h3>
    <p class="text-sm text-neutral-800 leading-relaxed line-clamp-2">{summary}</p>
    <p class="text-xs text-neutral-600 mt-4">By {author}</p>
  </div>
</a>
