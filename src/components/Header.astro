---
const services = [
  { name: "EOS\u00AE Implementation", href: "/services/eos-implementation" },
  { name: "Strategic Planning", href: "/services/strategy" },
  { name: "Fractional Executives", href: "/services/fractional-executives" },
  { name: "Financial Systems", href: "/services/financial-systems" },
  { name: "Team Health & Performance", href: "/services/team-health-performance" },
  { name: "People Experience Services", href: "/services/people-experience-services" },
  { name: "Research & Program Design", href: "/services/research-program-design" },
  { name: "Talent Search", href: "/services/talent-search" },
  { name: "Satori Gateway", href: "/services/gateway" },
];

const navLinks = [
  { name: "Case Studies", href: "/case-studies" },
  { name: "Blog", href: "/blog" },
  { name: "Contact Us", href: "/contact" },
];
---

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-neutral-950/10">
  <div class="container-site flex items-center justify-between h-16 lg:h-20">
    <!-- Logo -->
    <a href="/" class="flex-shrink-0">
      <img src="/images/logo.png" alt="Satori" class="h-8 lg:h-10" />
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden lg:flex items-center gap-8" aria-label="Main navigation">
      <a href="/about" class="text-sm text-neutral-950 hover:text-primary transition-colors">About Us</a>

      <!-- Services Dropdown -->
      <div class="relative group">
        <a href="/services" class="text-sm text-neutral-950 hover:text-primary transition-colors inline-flex items-center gap-1">
          Services
          <svg class="w-3.5 h-3.5 transition-transform group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M19 9l-7 7-7-7" />
          </svg>
        </a>
        <div class="absolute left-0 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
          <div class="bg-white rounded-lg shadow-lg border border-neutral-950/10 py-2 w-64">
            {services.map((service) => (
              <a
                href={service.href}
                class="block px-4 py-2 text-sm text-neutral-950 hover:bg-purple-50 hover:text-primary transition-colors"
              >
                {service.name}
              </a>
            ))}
          </div>
        </div>
      </div>

      {navLinks.map((link) => (
        <a href={link.href} class="text-sm text-neutral-950 hover:text-primary transition-colors">{link.name}</a>
      ))}
    </nav>

    <!-- Desktop CTAs -->
    <div class="hidden lg:flex items-center gap-3">
      <a href="/contact" class="btn-primary text-sm">Book an Intro Call</a>
      <a href="/services" class="btn-secondary text-sm">See how we help founders</a>
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-btn"
      class="lg:hidden p-2 -mr-2 text-neutral-950"
      aria-label="Open menu"
      aria-expanded="false"
    >
      <svg class="w-6 h-6" id="menu-icon-open" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg class="w-6 h-6 hidden" id="menu-icon-close" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden lg:hidden border-t border-neutral-950/10 bg-white">
    <div class="container-site py-4 space-y-4">
      <a href="/about" class="block text-base text-neutral-950 hover:text-primary">About Us</a>

      <!-- Mobile Services Accordion -->
      <div>
        <button id="mobile-services-btn" class="flex items-center justify-between w-full text-base text-neutral-950 hover:text-primary">
          <a href="/services">Services</a>
          <svg class="w-4 h-4 transition-transform" id="mobile-services-chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div id="mobile-services-list" class="hidden pl-4 mt-2 space-y-2">
          {services.map((service) => (
            <a href={service.href} class="block text-sm text-neutral-800 hover:text-primary">{service.name}</a>
          ))}
        </div>
      </div>

      {navLinks.map((link) => (
        <a href={link.href} class="block text-base text-neutral-950 hover:text-primary">{link.name}</a>
      ))}

      <div class="pt-4 border-t border-neutral-950/10 space-y-3">
        <a href="/contact" class="btn-primary text-sm w-full text-center">Book an Intro Call</a>
        <a href="/services" class="btn-secondary text-sm w-full text-center">See how we help founders</a>
      </div>
    </div>
  </div>
</header>

<script>
  const menuBtn = document.getElementById("mobile-menu-btn");
  const menu = document.getElementById("mobile-menu");
  const iconOpen = document.getElementById("menu-icon-open");
  const iconClose = document.getElementById("menu-icon-close");

  menuBtn?.addEventListener("click", () => {
    const isOpen = menu?.classList.toggle("hidden") === false;
    iconOpen?.classList.toggle("hidden", isOpen);
    iconClose?.classList.toggle("hidden", !isOpen);
    menuBtn.setAttribute("aria-expanded", String(isOpen));
  });

  const servicesBtn = document.getElementById("mobile-services-btn");
  const servicesList = document.getElementById("mobile-services-list");
  const servicesChevron = document.getElementById("mobile-services-chevron");

  servicesBtn?.addEventListener("click", (e) => {
    if ((e.target as HTMLElement).tagName !== "A") {
      servicesList?.classList.toggle("hidden");
      servicesChevron?.classList.toggle("rotate-180");
    }
  });
</script>
